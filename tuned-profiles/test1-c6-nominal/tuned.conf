#
# Tuned profile for Test 1: Idle with C6 state, Nominal frequency (2300 MHz)
#
# Description: Allows deep sleep (C6) on idle cores to measure power savings
#              with nominal CPU frequency
#
# Usage: tuned-adm profile test1-c6-nominal
#

[main]
summary=Test 1: Idle C6 state at nominal frequency (2300 MHz)
include=latency-performance

[variables]
# CPU configuration
isolated_cores=1-39
# Keep CPU0 for housekeeping

[cpu]
# Force userspace governor for fixed frequency
governor=userspace
# Pin frequency to nominal (2300 MHz = 2300000 kHz)
force_latency=1
energy_perf_bias=powersave
min_perf_pct=68
max_perf_pct=68

[sysctl]
# Disable automatic CPU frequency scaling
kernel.sched_min_granularity_ns=10000000
kernel.sched_wakeup_granularity_ns=15000000

[script]
script = ${i:PROFILE_DIR}/script.sh

[bootloader]
# Note: Changing this requires reboot
cmdline_test1_c6=nohz_full=1-39 isolcpus=1-39 intel_pstate=passive intel_idle.max_cstate=6
